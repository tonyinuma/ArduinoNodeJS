<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node Arduino</title>
    <link href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/solar/bootstrap.min.css" rel="stylesheet" integrity="sha384-8nq3OiMMgrVFAHyRMMO+DTfMEciSY+c3Awhj/5ljQ1xck1Uv2BUtMjsjLD8GT5Er" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
</head>
<body>

    <!--Naaaav-->
    <div class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
        <div class="container">
            <a href="../" class="navbar-brand">Arduino NodeJS - Temperatura</a>

            <i class="fab fa-github"></i>

        </div>
    </div>
    <!--Naaaav-->

    <hr>
    <hr>
    <hr>
    <hr>


    <!--Body-->
    <div class="container">

        <div class="jumbotron">
            <h1 class="display-3">Temperatura en Puno </h1>
            <p class="lead">La temperatura puede llegar a iveles muy altos</p>
            <hr class="my-4">
            <p>Podemos ayudar a nuestros hermanos Puneños con alguna Donación</p>
            <p class="lead">
                <a class="btn btn-primary btn-lg" href="#" role="button">Quiero Ayudar ♥</a>
            </p>
        </div>

        <canvas id="myCanvas"></canvas>

        <script src="/socket.io/socket.io.js" charset="utf-8"> </script>
        <script>
            const socket = io();

            let counter = 0;
            socket.on('arduinouno:data', function (dataSerial) {
                console.log(dataSerial);
                myChart.data.labels.push(counter);
                myChart.data.datasets.forEach(dataset => {
                    dataset.data.push(dataSerial.value);
                })
                counter++;
                myChart.update();
            });

            var ctx = document.getElementById('myCanvas').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ["Serial"],
                    datasets: [{
                        labels: "Serial",
                        background: 'rgb(52, 73, 94)',
                        borderColor: 'rgb(41, 128, 185)',
                        data: []
                    }]
                },
                options: {}
            });

        </script>
    </div>



</body>
</html>
